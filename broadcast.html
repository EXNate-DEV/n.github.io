<!DOCTYPE html>

<html>

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-N4CKXS2CMF"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }
        gtag("js", new Date());

        gtag("config", "G-N4CKXS2CMF");
    </script>
    <script src="/js/Elements.js"></script>
    <script type="importmap">
            {
                "imports": {
                    "socket.io-client": "https://cdn.socket.io/4.7.4/socket.io.esm.min.js"
                }
            }
        </script>
    <script src="/js/DOMPurify.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
    <link href="/main.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
</head>

<body data-bs-theme="dark">
    <img style="position: fixed; image-rendering: pixelated; top: 50%; left: 50%; transform: translate(-50%, -50%); max-width: 100%; max-height: 100%;"
        id="i">
    <h3 id="text" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);"></h3>
    <div class="bottombuttons">
        <button class="btn btn-outline-secondary lcb">Live Chat</button>
        <button class="btn btn-outline-secondary" onclick="location.pathname = '/'">Return Home</button>
        <button class="btn btn-outline-secondary"
            onclick="document.getElementById('i').requestFullscreen()">Fullscreen</button>
    </div>
    <script type="module">
        import { io } from "socket.io-client";
        const streamws = new WebSocket("wss://mlxoa.com:4443/livestream-ws");
        const search = new URLSearchParams(location.search);
        const text = document.getElementById("text");
        if (!search.get("csid")) {
            location.pathname = "/"
        }
        streamws.addEventListener("message", function (ev) {
            let obj = JSON.parse(ev.data)
            if (obj.type == "livestreamData") {
                if (obj.csid == decodeURIComponent(search.get("csid"))) {
                    if (obj.data != null) {
                        document.getElementById("i").src = obj.data[0];
                        document.getElementById("i").style.width = obj.data[1];
                        document.getElementById("i").style.height = obj.data[2];
                    } else {
                        document.getElementById("i").src = "";
                    }
                    text.innerText = obj.errormsg;
                }
            }
        })
    </script>
    <script type="module" src="/js/Livechat.js"></script>
</body>

</html>